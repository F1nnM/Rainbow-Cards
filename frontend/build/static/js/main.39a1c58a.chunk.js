(this["webpackJsonpyet-another-cards-against-humanity-clone"]=this["webpackJsonpyet-another-cards-against-humanity-clone"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(21),o=n.n(r),c=(n(29),n(3)),i=n(5),l=n(6),h=n(8),d=n(7),u=(n(30),n(0)),m=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"header",children:Object(u.jsxs)("span",{children:["Yet another ",Object(u.jsx)("a",{href:"https://cardsagainsthumanity.com/",children:"Cards against Humanity"})," clone."]})})}}]),n}(s.a.Component),p=n(2),j=(n(32),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.text?this.props.text.replace("[[BLANK]]","________"):null;return Object(u.jsx)("button",{className:"card aspect-ratio-box ".concat(this.props.type," ").concat(this.props.chosen?"chosen":""),onClick:this.props.onclick,children:Object(u.jsxs)("div",{className:"aspect-ratio-box-inner",children:[this.props.text&&this.props.trust&&Object(u.jsx)("span",{dangerouslySetInnerHTML:{__html:e}}),this.props.text&&this.props.trust||Object(u.jsx)("span",{children:e}),this.props.children&&Object(u.jsx)("div",{style:this.props.style,children:this.props.children}),this.props.mark&&Object(u.jsx)("div",{className:"mark",children:Object(u.jsx)("span",{children:this.props.mark})})]})})}}]),n}(s.a.Component)),b=(n(33),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"cardArea",children:[Object(u.jsxs)("div",{className:"tableArea",children:[Object(u.jsx)("div",{className:"blackCardContainer",children:Object(u.jsx)(j,{trust:!0,type:"black",text:this.props.blackCard.content,mark:this.props.blackCard.mark,children:this.props.blackCard.children})}),Object(u.jsx)("div",{className:"playedCardArea "+(this.props.enablePlayedCards?"":"blocked"),children:this.props.playedCards&&this.props.playedCards.map((function(t,n){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)(j,{trust:e.props.trustPlayedCards,type:"white",text:t.content,mark:t.mark,onclick:function(t){return e.props.playedCardsClicked(n)},chosen:t.chosenByCzar},t.content+""+n)})}))}),this.props.sidebar&&Object(u.jsx)("div",{className:"sidebarContainer",children:Object(u.jsx)("div",{className:"sidebarContent",children:this.props.sidebar})})]}),Object(u.jsxs)("div",{className:"whiteCardContainer",children:[this.props.blocker&&Object(u.jsx)("div",{className:"czarContainer",children:Object(u.jsx)("div",{className:"czarBackdrop",children:Object(u.jsx)("span",{className:"czarPrompt",children:this.props.blocker})})}),this.props.whiteCards&&this.props.whiteCards.map((function(t,n){return Object(u.jsx)(j,{trust:!0,type:"white",text:t.content,mark:t.mark,onclick:function(t){return e.props.whiteCardClicked(n)}},t.content+""+n)}))]})]})}}]),n}(s.a.Component)),O=(n(34),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return console.log(this.props.players),Object(u.jsx)("div",{className:"scoreboard",children:this.props.players.map((function(e,t){return Object(u.jsxs)("div",{className:"player",children:[e.name,e.isOwner?" (Owner)":"",": ",e.score," ",e.connected?"":e.left?"(Left)":"(Disconnected)"]},e.name+t)}))})}}]),n}(s.a.Component)),f=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a,s,r;(Object(i.a)(this,n),a=t.call(this,e),e.room)?(console.log("Room was supplied by props"),a.state={game:null,sessionId:e.room.sessionId,room:e.room,roomId:e.room.id}):(10===a.props.location.search.length?r=a.props.location.search.substring(1):(s=localStorage.getItem("sessionId"),r=localStorage.getItem("roomId")),a.state={game:null,sessionId:s,room:null,roomId:r});return a}return Object(l.a)(n,[{key:"joinedGame",value:function(e,t){var n=this;localStorage.setItem("roomId",t.id),localStorage.setItem("sessionId",t.sessionId),this.props.setRoom(t),t.onStateChange.once((function(t){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{game:t}))})),t.onStateChange((function(t){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{game:t}))})),t.onLeave((function(e){console.log("client left the room, code: "+e),n.joinGame()})),t.onError((function(e,t){alert("ROOM ERROR ("+e+"):\n"+t),console.log(e),console.log(t)}))}},{key:"clearGameAfterError",value:function(){localStorage.removeItem("sessionId"),localStorage.removeItem("roomId"),this.props.setRoom(null),this.props.history.replace("/")}},{key:"joinGame",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;console.log("joining init"),t.state.roomId?t.state.sessionId?(console.log("reconnecting"),t.props.client.reconnect(t.state.roomId,t.state.sessionId).then((function(e){console.log(e.sessionId,"joined",e.name),t.joinedGame(t,e)})).catch((function(n){n.message.match(/room "[^"]*" not found/gi)?(alert("Couldn't find the selected room!"),t.clearGameAfterError()):n.message.match(/room "[^"]*" not found/gi)?(alert("Your game session for this room has expired!"),t.clearGameAfterError()):(console.log(n.message),alert("RECONNECT Error, see console for details. Retrying in 10 seconds."),setTimeout((function(n){return t.joinGame(e)}),1e4))}))):(console.log("new connection"),this.props.client.joinById(this.state.roomId,{name:localStorage.getItem("name")}).then((function(t){console.log(t.sessionId,"joined",t.name),e.joinedGame(e,t)})).catch((function(t){alert("GAME JOIN ERROR, see console for details."),e.clearGameAfterError()}))):t.clearGameAfterError()}},{key:"componentDidUpdate",value:function(){console.log("Updated Game")}},{key:"componentDidMount",value:function(){this.props.room?this.joinedGame(this,this.props.room):this.joinGame()}},{key:"componentWillUnmount",value:function(){console.log("Unmounting"),this.props.room&&(this.props.room.removeAllListeners(),this.props.room.leave(),this.props.setRoom(null))}},{key:"startGame",value:function(){this.props.room.send("startGame")}},{key:"playCard",value:function(e,t){e.props.room.send("playCard",{index:t})}},{key:"czarVote",value:function(e,t){e.props.room.send("czarVote",{index:t})}},{key:"render",value:function(){var e=this;if(!this.props.room||!this.state.game)return Object(u.jsx)("div",{});var t,n=this.state.game.players[this.props.room.sessionId],a=this.state.game.winner?"And the winner is [[BLANK]]":this.state.game.blackCard.content||"Invite players with the code: "+this.state.roomId;!n.isOwner||this.state.game.gameRunning||this.state.game.winner||(t=Object(u.jsx)("button",{onClick:function(t){return e.startGame()},children:"Start Game"}));var s={content:a,children:t},r=this.state.game.winner?[{content:this.state.game.players[this.state.game.winner].name,mark:"WIN",chosenByCzar:!0}]:this.state.game.cardsPlayed;return Object(u.jsx)(b,{blocker:this.state.game.winner?"Game over":n.isCzar?"You are the czar!":this.state.game.czarsTurn?"It's the czars turn to vote":null,enablePlayedCards:n.isCzar&&!this.state.game.czarDidVote,blackCard:s,whiteCards:n.cards,whiteCardClicked:function(t){return e.playCard(e,t)},playedCards:r,playedCardsClicked:function(t){return e.czarVote(e,t)},sidebar:Object(u.jsx)(O,{players:Array.from(this.state.game.players.values())}),trustPlayedCards:!this.state.game.winner})}}]),n}(s.a.Component),g=Object(p.f)(f),v=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={name:localStorage.getItem("name")||"Anonymous"},a}return Object(l.a)(n,[{key:"whiteCardClicked",value:function(e,t){switch(t){case 0:e.props.history.push("/public_games");break;case 1:this.joinPrivate(),e.props.history.push("/game");break;case 2:e.props.history.push("/create");break;case 3:e.props.history.push("/game")}}},{key:"joinPrivate",value:function(){var e=prompt("Enter the game code:");e&&9===e.length?e!==localStorage.getItem("roomId")&&(localStorage.setItem("roomId",e),localStorage.removeItem("sessionId")):alert("Invalid code! A valid one is 9 characters long")}},{key:"render",value:function(){var e=this,t=[{content:"Join a public game"},{content:"Join a private game"},{content:"Create a new game"}];localStorage.getItem("roomId")&&t.push({content:"Rejoin the last game (might be closed already)"});var n=Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"Set your name:"}),Object(u.jsx)("input",{value:this.state.name,onChange:function(t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{name:t.target.value}))}}),Object(u.jsx)("button",{onClick:function(t){return localStorage.setItem("name",e.state.name)},children:"Set"})]});return Object(u.jsx)(b,{sidebar:n,blackCard:{content:"I'd like to [[BLANK]]"},whiteCards:t,whiteCardClicked:function(t){return e.whiteCardClicked(e,t)}})}}]),n}(s.a.Component),x=Object(p.f)(v),k=(n(39),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={rooms:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.client.getAvailableRooms().then((function(t){e.setState({rooms:t})})).catch((function(e){console.log(e),alert("Error! Check console for details.")}))}},{key:"openGame",value:function(e){localStorage.getItem("roomId")!==e&&(localStorage.removeItem("sessionId"),localStorage.setItem("roomId",e)),this.props.history.push("/game")}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"games-list",children:[Object(u.jsx)("button",{className:"refresh-button",onClick:function(e){return window.location.reload()},children:"Refresh"}),Object(u.jsx)("div",{children:this.state.rooms.map((function(t){return Object(u.jsxs)(j,{type:"white",style:{fontSize:"smaller"},onclick:function(n){e.openGame(t.roomId)},children:[Object(u.jsx)("span",{children:t.roomId}),Object(u.jsx)("hr",{}),Object(u.jsx)("span",{children:"Players:"}),Object(u.jsxs)("span",{children:[t.clients," / ",t.maxClients||"Inf"]}),Object(u.jsx)("span",{children:t.metadata})]},t.roomId)}))})]})}}]),n}(s.a.Component)),y=Object(p.f)(k),C=n(24),I=(n(40),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={sets:[],currentTotalWhite:0,currentTotalBlack:0,maxPlayers:10,private:!1,pointsNeeded:10},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://dellfinnlin.fritz.box:2567/getCards").then((function(e){return e.json()})).then((function(t){var n=0,a=0;for(var s in t)t[s].checked&&(a+=t[s].black,n+=t[s].white);e.setState(Object(c.a)(Object(c.a)({},e.state),{},{sets:t,currentTotalWhite:n,currentTotalBlack:a}))}))}},{key:"onclick",value:function(e){var t=[];for(var n in this.state.sets)this.state.sets[n].checked&&t.push(n);this.props.client.create("game",{maxPlayers:this.state.maxPlayers,pointsNeeded:this.state.pointsNeeded,sets:t,private:this.state.private,name:localStorage.getItem("name")}).then((function(t){console.log(t.sessionId,"joined",t.name),e.props.setRoom(t),e.props.history.push("/game")})).catch((function(e){alert("Error! See console for details."),console.log(e)}))}},{key:"toggleSelection",value:function(e,t){var n,a,s=this.state.sets;s[t].checked?(s[t].checked=!1,n=this.state.currentTotalBlack-s[t].black,a=this.state.currentTotalWhite-s[t].white):(s[t].checked=!0,n=this.state.currentTotalBlack+s[t].black,a=this.state.currentTotalWhite+s[t].white),this.setState(Object(c.a)(Object(c.a)({},this.state),{},{sets:s,currentTotalBlack:n,currentTotalWhite:a}))}},{key:"render",value:function(){var e=this,t=this.state.currentTotalBlack<20||this.state.currentTotalWhite<200;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"options",children:[Object(u.jsx)("h2",{children:"Sets to use"}),Object(u.jsx)("div",{className:"checkboxContainer",children:Object.entries(this.state.sets).map((function(t){var n=Object(C.a)(t,2),a=n[0],s=n[1];return Object(u.jsxs)("div",{className:"checkboxWithLabel",children:[Object(u.jsx)("input",{type:"checkbox",checked:s.checked,onChange:function(t){return e.toggleSelection(e,a)}}),Object(u.jsx)("label",{children:a})]},a)}))})]}),Object(u.jsxs)("div",{className:"options ".concat(t?"warn":""),children:[Object(u.jsxs)("span",{children:["Current number of cards: Black: ",this.state.currentTotalBlack," White: ",this.state.currentTotalWhite]}),t&&Object(u.jsx)("span",{children:"We recommend playing with at least 20 black and 200 white cards!"})]}),Object(u.jsxs)("div",{className:"options",children:[Object(u.jsx)("label",{children:"Max. number of players:"}),Object(u.jsx)("input",{type:"number",min:"3",max:"50",value:this.state.maxPlayers,onChange:function(t){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{maxPlayers:parseInt(t.target.value)}))}})]}),Object(u.jsxs)("div",{className:"options",children:[Object(u.jsx)("label",{children:"Points needed to win: "}),Object(u.jsx)("input",{type:"number",min:"1",max:"50",value:this.state.pointsNeeded,onChange:function(t){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{pointsNeeded:parseInt(t.target.value)}))}})]}),Object(u.jsxs)("div",{className:"options",children:[Object(u.jsx)("label",{children:"Make this game private: "}),Object(u.jsx)("input",{type:"checkbox",checked:this.state.private,onChange:function(t){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{private:t.target.checked}))}})]}),Object(u.jsx)("button",{onClick:function(t){return e.onclick(e)},className:"start-button",children:"Start Game"})]})}}]),n}(s.a.Component)),w=Object(p.f)(I),S=(n(41),n(23)),N=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={client:new S.Client("ws://dellfinnlin.fritz.box:2567"),room:null},a}return Object(l.a)(n,[{key:"setRoom",value:function(e,t){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{room:t})),console.log("Updated room")}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(m,{}),Object(u.jsxs)(p.c,{children:[Object(u.jsx)(p.a,{path:"/create",children:Object(u.jsx)(w,{client:this.state.client,setRoom:function(t){return e.setRoom(e,t)}})}),Object(u.jsx)(p.a,{path:"/game",children:Object(u.jsx)(g,{client:this.state.client,room:this.state.room,setRoom:function(t){return e.setRoom(e,t)}})}),Object(u.jsx)(p.a,{path:"/public_games",children:Object(u.jsx)(y,{client:this.state.client})}),Object(u.jsx)(p.a,{path:"/",children:Object(u.jsx)(x,{})})]})]})}}]),n}(s.a.Component),G=Object(p.f)(N),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))},T=n(13);o.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(T.a,{children:Object(u.jsx)(G,{})})}),document.getElementById("root")),R(console.log())}},[[42,1,2]]]);
//# sourceMappingURL=main.39a1c58a.chunk.js.map